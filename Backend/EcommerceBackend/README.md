# E-commerce Backend
The application is based on Spring Boot framework, supporting Token based Authentication with JWT and Spring Security.
It uses Spring Data JPA to interact with PostgreSQL Database.

## Test the application
Make sure that the container "mon-ecom-pg" is active, since it contains the PostgreSQL Server.
Instead, the e-commerce schema is automatically generated by the application thanks to Hibernate.

### Run the following SQL insert statements 
The first time you run the application, insert these data into the Database by hand:
```
INSERT INTO roles(name) VALUES('ROLE_USER');
INSERT INTO roles(name) VALUES('ROLE_ADMIN');
```
### Run the Spring Boot application
```
./mvnw spring-boot:run
```
### Interact with the services
The application automatically generates the documentation about the available endpoints, thanks to Swagger, here:
```
http://localhost:8080/swagger-ui/index.html
```
### Postman
Use this tool to test the endpoints:

1)Test public resources:
```
 GET http://localhost:8080/api/test/all
```
2)Test user resources:
``` 
Create an account:

POST http://localhost:8080/api/auth/signup

body: {  
    
    "username": "test123",
    "email": "test@gmail.com",
    "password": "testpasw",
    "phone": "3456787981",
    "firstname": "test_name",
    "lastname": "test_surname",
    "isbuyer": true,
    "isseller": true,
    "role": ["user"]
}   

Login with the credentials:

POST http://localhost:8080/api/auth/signin

body: {  
"username": "test123",
"password": "testpasw"
}

Take note of the generated bear token.

GET http://localhost:8080/api/test/user

Authorization: type: Bear Token

``` 
